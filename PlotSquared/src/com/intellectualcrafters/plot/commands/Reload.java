/*
 * Copyright (c) IntellectualCrafters - 2014. You are not allowed to distribute
 * and/or monetize any of our intellectual property. IntellectualCrafters is not
 * affiliated with Mojang AB. Minecraft is a trademark of Mojang AB.
 * 
 * >> File = Reload.java >> Generated by: Citymonstret at 2014-08-09 01:42
 */

package com.intellectualcrafters.plot.commands;

import org.bukkit.entity.Player;

import com.intellectualcrafters.plot.C;
import com.intellectualcrafters.plot.PlayerFunctions;
import com.intellectualcrafters.plot.PlotMain;
import com.intellectualcrafters.plot.PlotWorld;

/**
 * @Deprecated
 */
public class Reload extends SubCommand {

	public Reload() {
		super("reload", "plots.admin", "Reload configurations", "", "reload", CommandCategory.INFO, false);
		
		// TODO reload worlds as well
		
	}

	@Override
	public boolean execute(Player plr, String... args) {
		try {
			PlotMain.reloadTranslations();
			
			// The following won't affect world generation, as that has to be loaded during startup unfortunately.
			PlotMain.config.load(PlotMain.configFile);
			for (String pw: PlotMain.getPlotWorlds()) {
				PlotWorld plotworld = PlotMain.getWorldSettings(pw);
				plotworld.loadDefaultConfiguration(PlotMain.config.getConfigurationSection("worlds." + pw));
			}
			PlotMain.BroadcastWithPerms(C.RELOADED_CONFIGS);
		}
		catch (Exception e) {
			PlayerFunctions.sendMessage(plr, C.RELOAD_FAILED);
		}
		return true;
	}

}
